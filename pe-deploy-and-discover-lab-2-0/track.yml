slug: pe-deploy-and-discover-lab-2-0
id: rzm1rnl0at70
type: sandbox
title: Install Puppet Agents
teaser: Learn how to install agents from both the command line and the PE console.
description: |-
  **What you'll learn**

  In this lab, you'll install the Puppet agent using two different methods: locally using installation script and remotely from the PE console. Both methods enable you to install agents at scale.

  Installing agents at scale prepares your infrastructure to quickly and automatically scale up the number of nodes managed and configured as Puppet manifests are written and deployed to the primary Puppet server.


  **Prerequisites**

  None

  ---

  **Keep an eye on the clock**

  ![30 minute lab](https://storage.googleapis.com/instruqt-images/Clocks%20for%20Track%20Duration/30min100.png) The virtual learning environment will stay up for 60 minutes, however, **this lab should only take about 30 minutes** to complete. When your learning environment expires, your work will not be saved. If you haven't completed the lab, you can simply restart it.

  Click **Start track** when you're ready to begin.
icon: https://storage.googleapis.com/instruqt-frontend/img/tracks/puppet.png
tags:
- ""
owner: puppet
developers:
- thomas.chisholm@puppet.com
- greg.larkin@puppet.com
- tara.swenson@puppet.com
- catherine.trinkwon@puppet.com
private: true
published: true
show_timer: true
challenges:
- slug: install-pe-agents
  id: yn5tswpkuyaq
  type: challenge
  title: Install Puppet agents
  teaser: Install the Puppet agent by using both the local and remote installation methods.
  notes:
  - type: text
    contents: |-
      In this lab, you will:

      * Install an agent locally on a node by using the installation script.
      * Install an agent remotely on a node by using the PE console.
      * For both methods, sign the new agent certificate by using the console.


      Click **Start** when you're ready to begin.
  assignment: "<a name=\"linux\"><img src=\"https://storage.googleapis.com/instruqt-images/install-local-linux.png\"></a>\n\n## Run the agent installation script from the node’s command line.\n\n1. Log into the PE console with username `admin` and password `puppetlabs`.\n\n1. From the console sidebar, navigate to the **Nodes** page.\n\n1. In the upper-right corner, click **Add Nodes**.\n\n1. On the **Add nodes to inventory** page, click **Install Agents**.\n\n1. Copy the curl command shown in the ***nix nodes** field at the right of the console.<br><br>\U0001F4A1 **Tip:** Select the text and right-click to copy.\n\n1. ![swtich tabs](https://storage.googleapis.com/instruqt-images/Instruct%20Icons/icon_switch_tabs_white_32.png) Switch to the **Linux Agent** tab. Then, paste and run the curl command.<br><br>✔️ **Result:** This command installs the Puppet agent.\n\n1. ![swtich tabs](https://storage.googleapis.com/instruqt-images/Instruct%20Icons/icon_switch_tabs_white_32.png) Switch back to the **PE Console** tab when the installation is complete.\n\n1. Click **Refresh** at the top right of the console.\n\n1. Now you have to sign the agent's certificate. From the console sidebar, navigate to the **Certificates** page and click the **Unsigned certificates** tab.\n\n1. On the list of nodes, find the node name containing `nixagent` and click **Accept**.\n\n1. ![swtich tabs](https://storage.googleapis.com/instruqt-images/Instruct%20Icons/icon_switch_tabs_white_32.png) Switch back to the **Linux Agent** tab.\n\n1. Trigger a Puppet run:<br><br>\n     ```\n     puppet agent -t\n     ```\n\n13. ![swtich tabs](https://storage.googleapis.com/instruqt-images/Instruct%20Icons/icon_switch_tabs_white_32.png) Switch back to the **PE Console** tab.\n\n14. From the console sidebar, navigate to the **Nodes** page. Click the node name containing `nixagent`.\n\n1. On the **Facts** tab, inspect the facts about the `nixagent` node.\n\n<br>\U0001F388 **Congratulations!**  You installed Puppet agents locally from the command line on Linux. Continue below to learn how to install the agent from the PE console using Windows.\n\n---\n\n\n<a name=\"windows\"><img src=\"https://storage.googleapis.com/instruqt-images/install-remote-windows.png\"></a>\n\n## Install the agent from the PE console.\n\n1. ![swtich tabs](https://storage.googleapis.com/instruqt-images/Instruct%20Icons/icon_switch_tabs_white_32.png) Switch to the **PE Console** tab if needed.\n\n2. From the console sidebar, navigate to the **Nodes** page. In the upper-right corner, click **Add Nodes**.\n\n3. On the **Add nodes to inventory** page, click **Install Agents**.\n\n4. From the **Transport method** list, select **WinRM**. Enter the following information:\n\n     - WinRM hosts: `winagent`\n     - User: `Administrator`\n     - password: `Puppetlabs!`\n     - Test connection: checked\n\n5. Click **Add nodes**.\n\n6. To check the status of the installation, navigate to **Tasks** page, and then click the ID number of the **pe_bootstrap** task. When the installation is complete, you'll see a certname in the output at the bottom of the page.\n\n✏️ **Note:** The installation might take a few minutes to complete. Don't move on until step 6 has finished.\n\n7. When the certificate is ready to sign, a blue notification will appear on the **Certificates** page link.<br><br>\U0001F4A1 **Tip:** If the notification doesn't appear after the `pe_bootstrap` task has finished running, click the refresh icon at the top right of the PE console.\n\n8. Now sign the agent's certificate. Navigate to the **Certificates** page and then click the **Unsigned certificates** tab.\n\n9. In the list of nodes, find the node name containing `winagent` and click **Accept**.\n\n10. ![swtich tabs](https://storage.googleapis.com/instruqt-images/Instruct%20Icons/icon_switch_tabs_white_32.png) Switch to the **Windows Agent** tab.\n\n11. From the Windows Start Menu, click **Puppet**, and then click **Start Command Prompt with Puppet**. Then, trigger a Puppet run at the command prompt:<br><br>\n     ````\n     puppet agent -t\n     ````\n\n12. Click the **PE Console** tab, and from the console sidebar, navigate to the **Nodes** page. Click the node name containing `winagent`.\n\n1. From the **Facts** tab, inspect the facts about the `winagent` node.\n\n<br>\U0001F388 **Congratulations!**  You installed Puppet agents remotely from the PE console on Windows.\n\n<br>To close this lab, click **Next**."
  tabs:
  - title: PE Console
    type: service
    hostname: puppet
    port: 443
  - title: Linux Agent
    type: terminal
    hostname: nixagent
  - title: Windows Agent
    type: service
    hostname: guac
    path: /#/client/c/winagent?username=instruqt&password=Passw0rd!
    port: 8080
  - title: Lab Aid
    type: website
    hostname: guac
    url: https://puppet-kmo.gitbook.io/lab-aids/-MZKPjwKRKKFuXxxy7ge/pe101/install-puppet-agents
  difficulty: basic
  timelimit: 3599
checksum: "14414920154832074850"
