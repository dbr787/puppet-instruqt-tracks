slug: pe-deploy-and-discover-lab-2-0
id: rzm1rnl0at70
type: sandbox
title: 'PE Deploy and Discover - Lab 2.0: Install Agents'
teaser: Learn how to install agents in PE from both the command line and the PE console.
description: |-
  # We're putting the finishing touches on this BETA Puppet Practice Lab — go ahead and take a peek!

  Please help us find any bugs that need to be zapped and share your feedback for improving this learning experience by clicking the **Bug Zapper** tab at the top of each challenge and completing the short survey.

  We welcome your suggestions and value your feedback. If you have additional comments or suggestions after completing this BETA Puppet Practice Lab, please [reach out to us directly](mailto:education@puppet.com).
  ___

  **What you'll learn**

  In this lab, you'll install the Puppet agent using two different methods: locally using installation script and remotely from the PE console. Both methods enable you to install agents at scale.

  Installing agents at scale prepares your infrastructure to quickly and automatically scale up the number of nodes managed and configured as Puppet manifests are written and deployed to the primary Puppet server.


  **Prerequisites**

  None

  **Before you start**

  Keep an eye on the clock. You have 30 minutes to complete this lab. After 30 minutes, your learning environment expires and your work will not be saved. If you haven't completed the lab, you can simply restart it. Click **Start track** when you're ready to begin.
icon: https://storage.googleapis.com/instruqt-images/bz-smallicon-1.png
tags: []
owner: puppet
developers:
- thomas.chisholm@puppet.com
- greg.larkin@puppet.com
- tara.swenson@puppet.com
- catherine.trinkwon@puppet.com
private: true
published: true
show_timer: true
challenges:
- slug: install-pe-agents
  id: yn5tswpkuyaq
  type: challenge
  title: Install Puppet agents
  teaser: Install the Puppet agent by using both the local and remote installation methods.
  notes:
  - type: text
    contents: |-
      In this lab, you will:

      * Install an agent locally on a node by using the installation script.
      * Install an agent remotely on a node by using the PE console.
      * For both methods, sign the new agent certificate by using the console.


      Click **Start** when you're ready to begin.
  assignment: |
    <a name="linux"><img src="https://storage.googleapis.com/instruqt-images/install-local-linux.png"></a>

    ## Run the agent installation script from the node’s command line.

    1. On the **PE Console** tab, log in with username `admin` and password `puppetlabs`.
    2. From the console sidebar, navigate to the **Nodes** page.
    3. In the upper-right corner of the console, click **Add Nodes**.
    4. On the **Add nodes to inventory** page, click **Install Agents**.
    5. Copy the curl command that is shown in the ***nix nodes** field at the right of the console by selecting it and clicking CTRL+C/CMD+C or right-click+copy.
    6. Navigate to the Linux node by clicking the **Linux Agent** tab. Then, paste and run the curl command. This command installs the Puppet agent.
    7. When the installation is complete, return to the **PE Console** tab and click **Refresh** at the top right of the console.
    8. Now you have to sign the agent's certificate. From the console sidebar, navigate to the **Certificates** page and click the **Unsigned certificates** tab.
    9. On the list of nodes, find the `nixagent` node and click **Accept**.

    10. Return to the Linux node by clicking on the **Linux Agent** tab, and then trigger a Puppet run:
    ````
    puppet agent -t
    ````
    11. In the **PE Console** tab, from the console sidebar, navigate to the **Nodes** page. Click the `nixagent` node.
    12. On the **Facts** tab, inspect the facts about the `nixagent` node.

    Congratulations! You installed Puppet agents locally from the command line on Linux. Continue below to learn how to install the agent from the PE console using Windows.

    <a name="windows"><img src="https://storage.googleapis.com/instruqt-images/install-remote-windows.png"></a>

    ## Install the agent from the PE console.
    1. From the PE console sidebar, navigate to the **Nodes** page.
    2. In the upper-right corner of the console, click **Add Nodes**.
    3. On the **Add nodes to inventory** page, click **Install Agents**.
    4. From the **Transport method** list, select **WinRM**. Enter the following information:
     - WinRM hosts: `winagent`
     - User: `Administrator`
     - password: `Puppetlabs!`
    5. Click **Add nodes**. The installation might take a few minutes to complete.
    6. To check the status of the installation, navigate to **Tasks** page, and then click the ID number of the **pe_bootstrap** task. When the installation is complete, you'll see a certname in the output at the bottom of the page.
    7. When the certificate is ready to sign, a blue notification will appear on the Certificates page link. If the notification doesn't appear after the `pe_bootstrap` task has finished running, click the refresh icon at the top right of the PE console.
    8. Now sign the agent's certificate. Navigate to the **Certificates** page and then click the **Unsigned certificates** tab.
    9. In the list of nodes, find `winagent` and click **Accept**.
    10. Navigate to the Windows node by clicking the **Windows Agent** tab.
    11. From the Windows Start Menu, click **Puppet**, and then click **Start Command Prompt with Puppet**. Then, trigger a Puppet run at the command prompt:
    ````
    puppet agent -t
    ````
    11. Click the **PE Console** tab, and from the console sidebar, navigate to the **Nodes** page. Click the `winagent` node.
    12. From the **Facts** tab, inspect the facts about the `winagent` node.

    Congratulations! You installed Puppet agents remotely from the PE console on Windows.

    **Find bugs or have feedback? Click the **Bug Zapper** tab near the top of the page and let us know!**

    To close this lab, click **Next**.
  tabs:
  - title: PE Console
    type: service
    hostname: puppet
    port: 443
  - title: Linux Agent
    type: terminal
    hostname: nixagent
  - title: Windows Agent
    type: service
    hostname: guac
    path: /#/client/c/winagent?username=instruqt&password=Passw0rd!
    port: 8080
  - title: "Bug Zapper \U0001F99F⚡"
    type: website
    hostname: guac
    url: https://docs.google.com/forms/d/e/1FAIpQLSem6zQGd2jic0SB5ch0tenDgJu4X7pLu5wqJ0RbRepDzk4TbA/viewform?embedded=true
  difficulty: basic
  timelimit: 1800
checksum: "3137432216714026650"
