slug: pe-design-and-manage-lab-1-0
id: nua4cwppbg9z
type: track
title: 'PE Design and Manage - Lab 1.0: Inspect the agent catalog'
teaser: Inspect the agent catalog
description: |-
  **What you'll learn**

  In this lab you will:
  * Explore the agent run lifecycle by running puppet agent.
  * Inspect the resulting catalog to see what puppet agent manages out of the box.

  **Prerequisites**

  None

  ---

  **Keep an eye on the clock**

  ![10 minute lab](https://storage.googleapis.com/instruqt-images/Clocks%20for%20Track%20Duration/10min100.png) The virtual learning environment will stay up for 60 minutes, however, **this lab should only take about 10 minutes** to complete. When your learning environment expires, your work will not be saved. If you haven't completed the lab, you can simply restart it.

  Click **Start track** when you're ready to begin.
icon: ""
tags:
- ""
owner: puppet
developers:
- jain.waldrip@puppet.com
- greg.larkin@puppet.com
- alex.williamson@puppet.com
- thomas.chisholm@puppet.com
private: true
published: true
challenges:
- slug: inspect-the-agent-catalog
  id: rl9eexqbjtq4
  type: challenge
  title: Inspect the agent catalog
  teaser: Inspect the resulting catalog to see what puppet agent manages out of the box.
  notes:
  - type: text
    contents: |-
      In this lab you will:

      * Explore the agent run lifecycle by running puppet agent.

      * Inspect the resulting catalog to see what puppet agent manages out of the box.

      Click **Start** when you're ready to begin.
  assignment: |-
    # Instructions

    1. On the nixagent tab, run the Puppet agent to request a catalog from the primary server.

    ```
    puppet agent -t
    ```
    2. Locate the catalog by running the following command:

    ```
    puppet config print client_datadir
    ```
     Expected output:
    ```
    /opt/puppetlabs/puppet/cache/client_data              # on linux
    ```
    3. Inspect the contents of the catalog and take note - the service resource pxp-agent is being managed by running the following command to filter the catalog contents for resources of type "Service":

    ```
    cat /opt/puppetlabs/puppet/cache/client_data/catalog/*.json | jq -c '.resources[] | select(.type=="Service")' | jq
    ```
    Result: As the timestamp for the catalog file shows, the primary server just generated the first catalog and delivered it to the node.
    ```
    ...
    {
          "type": "Service",
          "title": "pxp-agent",
          "tags": [
            "service",
            "pxp-agent",
            "class",
            "puppet_enterprise::pxp_agent::service",
            "puppet_enterprise",
            "pxp_agent",
            "puppet_enterprise::pxp_agent",
            "puppet_enterprise::profile::agent",
            "profile",
            "agent",
            "node",
            "default"
          ],
          "file": "/opt/puppetlabs/puppet/modules/puppet_enterprise/manifests/pxp_agent/service.pp",
          "line": 4,
          "exported": false,
          "parameters": {
            "ensure": true,
            "enable": true,
            "hasrestart": true
      ...
    ```
  tabs:
  - title: nixagent
    type: terminal
    hostname: nixagent1
  - title: PE Console
    type: service
    hostname: puppet
    path: /
    port: 443
  - title: PE-shell
    type: terminal
    hostname: puppet
  difficulty: basic
  timelimit: 3569
checksum: "9941370097920433408"
